<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}Reserva de aulas - IES Antonio García Bellido{% endblock %}</title>

    <!-- CSS principal -->
    <link rel="stylesheet" href="{{ url_for('static', path='styles.css') }}" />

    <!-- ===== CSS del menú (ligero) ===== -->
    <style>
      nav.menu {
        background: #0f172a;
        color: #fff;
        padding: 0.5rem 1rem;
        display: flex;
        justify-content: center;
      }
      nav.menu ul {
        list-style: none;
        display: flex;
        gap: 1.25rem;
        margin: 0;
        padding: 0;
        align-items: center;
      }
      nav.menu a {
        color: #fff;
        text-decoration: none;
        font-size: 0.9rem;
      }
      nav.menu li { position: relative; }
      .submenu > a::after { content: " ▼"; font-size: 0.8rem; }
      .submenu ul {
        display: none;
        position: absolute;
        top: 26px; left: 0;
        background: #1e293b;
        border-radius: 6px;
        padding: 0.5rem;
        min-width: 200px;
        z-index: 50;
      }
      .submenu:hover ul { display: block; }
      .submenu ul li { padding: 0.25rem 0; }
      .submenu ul a { display: block; padding: 0.25rem 0.5rem; }
      .submenu ul a:hover { text-decoration: underline; }
    </style>

    <!-- Control de sesión para mostrar menú admin -->
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const rol = (localStorage.getItem("rol") || "").toLowerCase();
        const adminMenu = document.getElementById("menu-admin");
        if (adminMenu && rol !== "admin") {
          adminMenu.style.display = "none";
        }
      });
      function logout() {
        localStorage.clear();
        window.location.href = "/login";
      }
    </script>
  </head>

  <body>
    <!-- CABECERA -->
    <header class="topbar">
      <div class="topbar-left">
        <img
          src="{{ url_for('static', path='logo.png') }}"
          class="logo-centro"
          alt="Logo del centro"
          onerror="this.style.display='none'"
        />
        <div class="topbar-titles">
          <span class="centro-nombre">IES Antonio García Bellido</span>
          <span class="app-nombre">Reserva de aulas</span>
        </div>
      </div>
    </header>

    <!-- MENÚ PRINCIPAL -->
    <nav class="menu">
      <ul>
        <li><a href="/web">Cuadrante</a></li>

        <li class="submenu">
          <a href="javascript:void(0)">Reservas</a>
          <ul>
            <li><a href="/web/reservar">Hacer reserva</a></li>
            <li><a href="/web/mis-reservas">Mis reservas</a></li>
          </ul>
        </li>

        <li class="submenu" id="menu-admin">
          <a href="javascript:void(0)">Administración</a>
          <ul>
            <li><a href="/web/usuarios">Usuarios</a></li>
            <li><a href="/web/importar">Importar profesores</a></li>
            <li><a href="/web/estadisticas">Estadísticas</a></li>
          </ul>
        </li>

        <li class="submenu">
          <a href="javascript:void(0)">Cuenta</a>
          <ul>
            <li><a href="/web/cambiar-password">Cambiar contraseña</a></li>
            <li><a style="cursor:pointer;" onclick="logout()">Cerrar sesión</a></li>
          </ul>
        </li>
      </ul>
    </nav>

    <!-- CONTENIDO -->
    <main class="main-container">
      {% block content %}{% endblock %}
    </main>
  </body>
</html>
